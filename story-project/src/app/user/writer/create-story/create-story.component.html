<div>
    <nav class="navbar">
        <div class="nav-left">
            <img class="logo" src="logo.jpg" alt="App Logo">



        </div>

        <div class="nav-right">




            <button class="cancel">Cancel</button>
            <button class="prime" routerLink="/user/write-story">Next</button>


        </div>
    </nav>
</div>

<!-- <h2 class='header'>Story Details</h2> -->

<div class="details">
    <div class="cover">
        <label class="file-input-label" title="Upload cover image">
            <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden />

            <!-- Upload Icon & Text (Only shown when no image is selected) -->
            <img *ngIf="!coverImageUrl" src="image.png" alt="Upload Icon" class="upload-icon" />
            <p *ngIf="!coverImageUrl" style="color: rgb(102, 102, 102);">Add a cover image +</p>
        </label>

        <!-- Cover Preview (Only shown when an image is uploaded) -->
        <div class="cover-preview-container" *ngIf="coverImageUrl">
            <img [src]="coverImageUrl" alt="Cover Preview" class="cover-preview" />

            <!-- Remove Button -->
            <button class="remove-btn" (click)="removeImage()">âœ–</button>
        </div>
    </div>



    <div class="container">

        <h3>Story Details</h3>

        <form [formGroup]="storyForm" (ngSubmit)="submitStory()">

            <label>Title:</label>
            <input type="text" formControlName="title" placeholder="Enter story title" required />

            <label>Poster URL:</label>
            <input type="text" formControlName="posterUrl" placeholder="Enter poster URL" required />

            <label>Summary:</label>
            <textarea formControlName="summary" placeholder="Enter summary"></textarea>





            <!-- <label>Author ID:</label>
        <input type="text" formControlName="authorId" required />

        <label>Author Name:</label>
        <input type="text" formControlName="authorName" required /> -->

            <label>Paid Story:</label>
            <input type="checkbox" formControlName="isPaid" />

            <label for="genre">Genre:</label>
            <select id="genre" formControlName="genre" (click)="showGenres = true" (change)="onGenreChange($event)"
                class="dropdown">
                <option value="" *ngIf="!selectedGenre" disabled selected>Select a category</option>
                <ng-container *ngIf="showGenres || selectedGenre">
                    <option *ngFor="let genre of genres" [value]="genre">{{ genre }}</option>
                </ng-container>
            </select>




            <label>Tags:</label>
            <div class="tag-input">
                <input type="text" [(ngModel)]="newTag" placeholder="Enter tag" #tagInput />
                <button type="button" (click)="addTag(tagInput)">Add</button>
            </div>
            
            <!-- Display Added Tags -->
            <div class="tag-list">
                <span *ngFor="let tag of tags.controls; let i = index" class="tag">
                    {{ tag.value }} 
                    <button type="button" (click)="removeTag(i)">X</button>
                </span>
            </div>
            
            <label>
                <input type="checkbox" formControlName="isPaid" /> Paid Story
            </label>

        </form>

    </div>
</div>
<!-- <div class="editor">
    <h3>Write Story here</h3> 
   
    <app-tiptap-editor (contentChange)="storyForm.controls['content'].setValue($event)"></app-tiptap-editor>
</div>  -->